!function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return o(n?n:e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){!function(e,n){"undefined"!=typeof t&&t.exports?t.exports.browser=n():"function"==typeof define&&define.amd?define(n):this[e]=n()}("bowser",function(){function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function i(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var o,r=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(e),a=!s&&/android/i.test(e),c=n(/edge\/(\d+(\.\d+)?)/i),u=n(/version\/(\d+(\.\d+)?)/i),d=/tablet/i.test(e),l=!d&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?o={name:"Opera",opera:t,version:u||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?(o={name:"Windows Phone",windowsphone:t},c?(o.msedge=t,o.version=c):(o.msie=t,o.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?o={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?o={name:"Microsoft Edge",msedge:t,version:c}:/chrome|crios|crmo/i.test(e)?o={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?(o={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},u&&(o.version=u)):/sailfish/i.test(e)?o={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?o={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(o={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(o.firefoxos=t)):/silk/i.test(e)?o={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:a?o={name:"Android",version:u}:/phantom/i.test(e)?o={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?o={name:"BlackBerry",blackberry:t,version:u||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(o={name:"WebOS",webos:t,version:u||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(o.touchpad=t)):o=/bada/i.test(e)?{name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||u}:/safari/i.test(e)?{name:"Safari",safari:t,version:u}:{name:n(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(e)?(o.name=o.name||"Webkit",o.webkit=t,!o.version&&u&&(o.version=u)):!o.opera&&/gecko\//i.test(e)&&(o.name=o.name||"Gecko",o.gecko=t,o.version=o.version||n(/gecko\/(\d+(\.\d+)?)/i)),o.msedge||!a&&!o.silk?r&&(o[r]=t,o.ios=t):o.android=t;var f="";o.windowsphone?f=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r?(f=n(/os (\d+([_\s]\d+)*) like mac os x/i),f=f.replace(/[_\s]/g,".")):a?f=n(/android[ \/-](\d+(\.\d+)*)/i):o.webos?f=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?f=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?f=n(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(f=n(/tizen[\/\s](\d+(\.\d+)*)/i)),f&&(o.osversion=f);var h=f.split(".")[0];return d||"ipad"==r||a&&(3==h||4==h&&!l)||o.silk?o.tablet=t:(l||"iphone"==r||"ipod"==r||a||o.blackberry||o.webos||o.bada)&&(o.mobile=t),o.msedge||o.msie&&o.version>=10||o.chrome&&o.version>=20||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1?o.a=t:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6?o.c=t:o.x=t,o}var t=!0,n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var i=e[t];if("string"==typeof i&&i in n)return!0}return!1},n._detect=e,n})},{}],2:[function(e,t,n){t.exports=function(){var e=function(e){return function(t){var n=t[e];return n&&n.getAttribute("contenteditable")?n:null}};return{next:e("nextElementSibling"),previous:e("previousElementSibling")}}()},{}],3:[function(e,t,n){(function(n){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,o=e("./config"),r=e("./util/string"),s=e("./node-type");t.exports=function(){var e,t,n,a,c,u=/^\s*$/,d="<!-- BLOCK -->",l=function(i){var o,r,s=i.pastedHtmlRules;for(e=s.allowedElements||{},t=s.requiredAttributes||{},n=s.transformElements||{},a={},o=0;o<s.blockLevelElements.length;o++)r=s.blockLevelElements[o],a[r]=!0;for(c={},o=0;o<s.splitIntoBlocks.length;o++)r=s.splitIntoBlocks[o],c[r]=!0};return l(o),{updateConfig:l,paste:function(e,t,n){var r=e.ownerDocument;e.setAttribute(o.pastingAttribute,!0),t.isSelection&&(t=t.deleteContent()),t.save();var s=this.injectPasteholder(r);s.focus();var a=this;setTimeout(function(){var r;r=a.parseContent(s),i(s).remove(),e.removeAttribute(o.pastingAttribute),t.restore(),n(r,t)},0)},injectPasteholder:function(e){var t=i(e.createElement("div")).attr("contenteditable",!0).css({position:"fixed",right:"5px",top:"50%",width:"1px",height:"1px",overflow:"hidden",outline:"none"})[0];return i(e.body).append(t),t},parseContent:function(e){for(var t=this.filterHtmlElements(e),n=t.split(d),i=0;i<n.length;i++){var o=n[i];o=this.cleanWhitespace(o),o=r.trim(o),n[i]=o}return n=n.filter(function(e){return!u.test(e)})},filterHtmlElements:function(e,t){t||(t=[]);for(var n,i="",o=0;o<e.childNodes.length;o++)if(n=e.childNodes[o],n.nodeType===s.elementNode){var a=this.filterHtmlElements(n,t);i+=this.conditionalNodeWrap(n,a)}else n.nodeType===s.textNode&&(i+=r.escapeHtml(n.nodeValue));return i},conditionalNodeWrap:function(e,t){var n=e.nodeName.toLowerCase();if(n=this.transformNodeName(n),this.shouldKeepNode(n,e)){var i=this.filterAttributes(n,e);return"br"===n?"<"+n+i+">":u.test(t)?t:"<"+n+i+">"+t+"</"+n+">"}return c[n]?d+t+d:a[n]?t+" ":t},filterAttributes:function(t,n){for(var i="",o=0,r=(n.attributes||[]).length;r>o;o++){var s=n.attributes[o].name,a=n.attributes[o].value;e[t][s]&&a&&(i+=" "+s+'="'+a+'"')}return i},transformNodeName:function(e){return n[e]?n[e]:e},hasRequiredAttributes:function(e,n){var i,o,r=t[e];if(r)for(var s=0;s<r.length;s++)if(i=r[s],o=n.getAttribute(i),!o)return!1;return!0},shouldKeepNode:function(t,n){return e[t]&&this.hasRequiredAttributes(t,n)},cleanWhitespace:function(e){var t=e.replace(/(.)(\u00A0)/g,function(e,t,n,i,o){return/[\u0020]/.test(t)?t+"Â ":t+" "});return t}}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":4,"./node-type":16,"./util/string":25}],4:[function(e,t,n){t.exports={log:!1,logErrors:!0,editableClass:"js-editable",editableDisabledClass:"js-editable-disabled",pastingAttribute:"data-editable-is-pasting",boldTag:"strong",italicTag:"em",pastedHtmlRules:{allowedElements:{a:{href:!0},strong:{},em:{},br:{}},requiredAttributes:{a:["href"]},transformElements:{b:"strong",i:"em"},splitIntoBlocks:["h1","h2","h3","h4","h5","h6","p","blockquote"],blockLevelElements:["h1","h2","h3","h4","h5","h6","div","p","pre","hr","blockquote","article","figure","header","footer","ul","ol","li","section","table","video"]}}},{}],5:[function(e,t,n){(function(n){var i,o="undefined"!=typeof window?window.rangy:"undefined"!=typeof n?n.rangy:null,r="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,o="undefined"!=typeof window?window.rangy:"undefined"!=typeof n?n.rangy:null,s=e("./node-type"),a=e("./range-save-restore"),c=e("./parser"),u=e("./util/string");t.exports=i=function(){var e=function(e,t,n){return t=a.save(t),n.call(i),a.restore(e,t)},t=/\u200B/g,n=/\uFEFF/g,d=/[^\S ]/g;return{tidyHtml:function(e){this.normalizeTags(e)},normalizeTags:function(e){var t,n,i,o,r=document.createDocumentFragment();for(t=0;t<e.childNodes.length;t++)if(i=e.childNodes[t],i&&("BR"===i.nodeName||i.textContent)){if(i.nodeType===s.elementNode&&"BR"!==i.nodeName){for(o=i;null!==(o=o.nextSibling)&&c.isSameNode(o,i);){for(n=0;n<o.childNodes.length;n++)i.appendChild(o.childNodes[n].cloneNode(!0));o.parentNode.removeChild(o)}this.normalizeTags(i)}r.appendChild(i.cloneNode(!0))}for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(r)},normalizeWhitespace:function(e){return e.replace(d," ")},cleanInternals:function(e){e.innerHTML=this.extractContent(e,!0)},extractContent:function(e,i){var o;o=e.nodeType===s.documentFragmentNode?this.getInnerHtmlOfFragment(e):e.innerHTML,o=o.replace(n,""),o=o.replace(t,"<br>");var r=document.createElement("div");return r.innerHTML=o,this.unwrapInternalNodes(r,i),r.innerHTML},getInnerHtmlOfFragment:function(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML},createFragmentFromString:function(e){for(var t=document.createDocumentFragment(),n=r("<div>").html(e).contents(),i=0;i<n.length;i++){var o=n[i];t.appendChild(o)}return t},adoptElement:function(e,t){return e.ownerDocument!==t?t.adoptNode(e):e},cloneRangeContents:function(e){for(var t=e.cloneContents(),n=t.childNodes[0],i=document.createDocumentFragment();n.childNodes.length;)i.appendChild(n.childNodes[0]);return i},unwrapInternalNodes:function(e,t){for(;e;){var n=e.nextSibling;if(e.nodeType===s.elementNode){var i=e.getAttribute("data-editable");e.firstChild&&this.unwrapInternalNodes(e.firstChild,t),"remove"===i?r(e).remove():"unwrap"===i?this.unwrap(e):"ui-remove"!==i||t?"ui-unwrap"!==i||t||this.unwrap(e):r(e).remove()}e=n}},getTags:function(e,t,n){for(var i=this.getInnerTags(t,n),o=t.commonAncestorContainer;o!==e;)(!n||n(o))&&i.push(o),o=o.parentNode;return i},getTagsByName:function(e,t,n){return this.getTags(e,t,function(e){return e.nodeName===n.toUpperCase()})},getInnerTags:function(e,t){return e.getNodes([s.elementNode],t)},getTagNames:function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++)t.push(e[n].nodeName);return t},isAffectedBy:function(e,t,n){for(var i,o=this.getTags(e,t),r=0;r<o.length;r++)if(i=o[r],i.nodeName===n.toUpperCase())return!0;return!1},isExactSelection:function(e,t,n){var i=o.createRange();if(i.selectNodeContents(t),e.intersectsRange(i)){var s=e.toString(),a=r(t).text();return n&&(s=u.trim(s),a=u.trim(a)),""!==s&&s===a}return!1},expandTo:function(e,t,n){return t.selectNodeContents(n),t},toggleTag:function(e,t,n){var i=this.getTagsByName(e,t,n.nodeName);return 1===i.length&&this.isExactSelection(t,i[0],"visible")?this.removeFormatting(e,t,n.nodeName):this.forceWrap(e,t,n)},isWrappable:function(e){return e.canSurroundContents()},forceWrap:function(t,n,i){return n=e(t,n,function(){this.nuke(t,n,i.nodeName)}),this.isWrappable(n)||(n=e(t,n,function(){this.nuke(t,n)})),this.wrap(n,i),n},wrap:function(e,t){if(t=u.isString(t)?r(t)[0]:t,this.isWrappable(e)){e.surroundContents(t)}else console.log("content.wrap(): can not surround range")},unwrap:function(e){var t=r(e),n=t.contents();n.length?n.unwrap():t.remove()},removeFormatting:function(t,n,i){return e(t,n,function(){this.nuke(t,n,i)})},nuke:function(e,t,n){for(var i=this.getTags(e,t),o=0;o<i.length;o++){var r=i[o];"BR"===r.nodeName||n&&r.nodeName!==n.toUpperCase()||this.unwrap(r)}},insertCharacter:function(e,t,n){var i=document.createTextNode(t),o=e.cloneRange();o.collapse(n),o.insertNode(i),n?e.setStartBefore(i):e.setEndAfter(i),e.normalizeBoundaries()},surround:function(e,t,n,i){return i||(i=n),this.insertCharacter(t,i,!1),this.insertCharacter(t,n,!0),t},deleteCharacter:function(t,n,i){return this.containsString(n,i)&&(n.splitBoundaries(),n=e(t,n,function(){for(var e=u.regexp(i),t=n.getNodes([s.textNode],function(t){return t.nodeValue.search(e)>=0}),o=0;o<t.length;o++){var r=t[o];r.nodeValue=r.nodeValue.replace(e,"")}}),n.normalizeBoundaries()),n},containsString:function(e,t){var n=e.toString();return n.indexOf(t)>=0},nukeTag:function(e,t,n){for(var i=this.getTags(e,t),o=0;o<i.length;o++){var r=i[o];r.nodeName===n&&this.unwrap(r)}}}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./node-type":16,"./parser":17,"./range-save-restore":19,"./util/string":25}],6:[function(e,t,n){(function(n){var i="undefined"!=typeof window?window.rangy:"undefined"!=typeof n?n.rangy:null,o="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=e("./config"),s=e("./util/error"),a=e("./parser"),c=e("./content"),u=e("./clipboard"),d=e("./dispatcher"),l=e("./cursor"),f=e("./spellcheck"),h=e("./create-default-events"),p=e("bowser").browser,g=function(e){var t={window:window,defaultBehavior:!0,mouseMoveSelectionChanges:!1,browserSpellcheck:!0};this.config=o.extend(t,e),this.win=this.config.window,this.editableSelector="."+r.editableClass,i.initialized||i.init(),this.dispatcher=new d(this),this.config.defaultBehavior===!0&&this.dispatcher.on(h(this))};g.parser=a,g.content=c,g.browser=p,window.Editable=g,t.exports=g,g.globalConfig=function(e){o.extend(r,e),u.updateConfig(r)},g.prototype.add=function(e){return this.enable(o(e)),this},g.prototype.remove=function(e){var t=o(e);return this.disable(t),t.removeClass(r.editableDisabledClass),this},g.prototype.disable=function(e){var t=this.win.document.body;return e=e||o("."+r.editableClass,t),e.removeAttr("contenteditable").removeAttr("spellcheck").removeClass(r.editableClass).addClass(r.editableDisabledClass),this},g.prototype.enable=function(e,t){var n=this.win.document.body;return e=e||o("."+r.editableDisabledClass,n),e.attr("contenteditable",!0).attr("spellcheck",this.config.browserSpellcheck).removeClass(r.editableDisabledClass).addClass(r.editableClass),t&&e.each(function(e,t){c.tidyHtml(t)}),this},g.prototype.suspend=function(e){var t=this.win.document.body;return e=e||o("."+r.editableClass,t),e.removeAttr("contenteditable"),this},g.prototype["continue"]=function(e){var t=this.win.document.body;return e=e||o("."+r.editableClass,t),e.attr("contenteditable",!0),this},g.prototype.createCursor=function(e,t){var n,r=o(e).closest(this.editableSelector);if(t=t||"beginning",r.length){var a=i.createRange();"beginning"===t||"end"===t?(a.selectNodeContents(e),a.collapse("beginning"===t?!0:!1)):e!==r[0]?"before"===t?(a.setStartBefore(e),a.setEndBefore(e)):"after"===t&&(a.setStartAfter(e),a.setEndAfter(e)):s("EditableJS: cannot create cursor outside of an editable block."),n=new l(r[0],a)}return n},g.prototype.createCursorAtBeginning=function(e){return this.createCursor(e,"beginning")},g.prototype.createCursorAtEnd=function(e){return this.createCursor(e,"end")},g.prototype.createCursorBefore=function(e){return this.createCursor(e,"before")},g.prototype.createCursorAfter=function(e){return this.createCursor(e,"after")},g.prototype.getContent=function(e){return c.extractContent(e)},g.prototype.appendTo=function(e,t){e=c.adoptElement(e,this.win.document),"string"==typeof t&&(t=c.createFragmentFromString(t));var n=this.createCursor(e,"end");return n.insertAfter(t),n},g.prototype.prependTo=function(e,t){e=c.adoptElement(e,this.win.document),"string"==typeof t&&(t=c.createFragmentFromString(t));var n=this.createCursor(e,"beginning");return n.insertBefore(t),n},g.prototype.getSelection=function(e){var t=this.dispatcher.selectionWatcher.getFreshSelection();if(e&&t){var n=t.range;try{n.compareNode(e)!==n.NODE_BEFORE_AND_AFTER&&(t=void 0)}catch(i){t=void 0}}return t},g.prototype.setupSpellcheck=function(e){return this.spellcheck=new f(this,e),this},g.prototype.on=function(e,t){return this.dispatcher.on(e,t),this},g.prototype.off=function(e,t){var n=Array.prototype.slice.call(arguments);return this.dispatcher.off.apply(this.dispatcher,n),this},g.prototype.unload=function(){return this.dispatcher.unload(),this};for(var v=function(e){g.prototype[e]=function(t){return this.on(e,t)}},m=["focus","blur","flow","selection","cursor","newline","insert","split","merge","empty","change","switch","move","clipboard","paste"],y=0;y<m.length;++y){var b=m[y];v(b)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./clipboard":3,"./config":4,"./content":5,"./create-default-events":8,"./cursor":9,"./dispatcher":10,"./parser":17,"./spellcheck":22,"./util/error":23,bowser:1}],7:[function(e,t,n){(function(n){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,o=e("./parser"),r=e("./content"),s=e("./util/log"),a=e("./block");t.exports=function(e){var t=e.win.document;e.dispatcher.selectionWatcher;return{focus:function(e){if(o.isVoid(e)){var n=t.createElement("br");n.setAttribute("data-editable","remove"),e.appendChild(n)}},blur:function(e){r.cleanInternals(e)},selection:function(e,t){s(t?"Default selection behavior":"Default selection empty behavior")},cursor:function(e,t){s(t?"Default cursor behavior":"Default cursor empty behavior")},newline:function(e,n){var i=n.isAtEnd(),o=t.createElement("br");if(n.insertBefore(o),i){s("at the end");var r=t.createTextNode("â");n.insertAfter(r)}else s("not at the end");n.setVisibleSelection()},insert:function(e,t,n){var i=e.parentNode,o=e.cloneNode(!1);switch(o.id&&o.removeAttribute("id"),t){case"before":i.insertBefore(o,e),e.focus();break;case"after":i.insertBefore(o,e.nextSibling),o.focus()}},split:function(e,t,n,i){var o=e.cloneNode();o.appendChild(t);var s=e.parentNode;for(s.insertBefore(o,e);e.firstChild;)e.removeChild(e.firstChild);e.appendChild(n),r.tidyHtml(o),r.tidyHtml(e),e.focus()},merge:function(t,n,i){var o,s;switch(n){case"before":o=a.previous(t),s=t;break;case"after":o=t,s=a.next(t)}o&&s&&(i=o.childNodes.length>0?e.appendTo(o,s.innerHTML):e.prependTo(o,s.innerHTML),s.parentNode.removeChild(s),i.save(),r.tidyHtml(o),i.restore(),i.setVisibleSelection())},empty:function(e){s("Default empty behavior")},"switch":function(e,t,n){var i,o;switch(t){case"before":o=a.previous(e),o&&(n.moveAtTextEnd(o),n.setVisibleSelection());break;case"after":i=a.next(e),i&&(n.moveAtBeginning(i),n.setVisibleSelection())}},move:function(e,t,n){s("Default move behavior")},paste:function(t,n,o){var s,a=n[0];if(o.insertBefore(a),n.length<=1)o.setVisibleSelection();else{for(var c=t.parentNode,u=t,d=1;d<n.length;d++){var l=t.cloneNode(!1);l.id&&l.removeAttribute("id"),s=r.createFragmentFromString(n[d]),i(l).append(s),c.insertBefore(l,u.nextSibling),u=l}o=e.createCursorAtEnd(u),o.setVisibleSelection()}},clipboard:function(e,t,n){s("Default clipboard behavior")}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./block":2,"./content":5,"./parser":17,"./util/log":24}],8:[function(e,t,n){var i=e("./create-default-behavior");t.exports=function(e){var t=i(e);return{focus:function(e){t.focus(e)},blur:function(e){t.blur(e)},flow:function(e,n){t.flow(e,n)},selection:function(e,n){t.selection(e,n)},cursor:function(e,n){t.cursor(e,n)},newline:function(e,n){t.newline(e,n)},split:function(e,n,i,o){t.split(e,n,i,o)},insert:function(e,n,i){t.insert(e,n,i)},merge:function(e,n,i){t.merge(e,n,i)},empty:function(e){t.empty(e)},"switch":function(e,n,i){t["switch"](e,n,i)},move:function(e,n,i){t.move(e,n,i)},clipboard:function(e,n,i){t.clipboard(e,n,i)},paste:function(e,n,i){t.paste(e,n,i)}}}},{"./create-default-behavior":7}],9:[function(e,t,n){(function(n){var i,o="undefined"!=typeof window?window.rangy:"undefined"!=typeof n?n.rangy:null,r="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,s=e("./content"),a=e("./parser"),c=e("./util/string"),u=e("./node-type"),d=e("./util/error"),l=e("./range-save-restore");t.exports=i=function(){var e=function(e,t){this.setHost(e),this.range=t,this.isCursor=!0};return e.prototype=function(){return{isAtEnd:function(){return a.isEndOfHost(this.host,this.range.endContainer,this.range.endOffset)},isAtTextEnd:function(){return a.isTextEndOfHost(this.host,this.range.endContainer,this.range.endOffset)},isAtBeginning:function(){return a.isBeginningOfHost(this.host,this.range.startContainer,this.range.startOffset)},insertBefore:function(e){if(c.isString(e)&&(e=s.createFragmentFromString(e)),!a.isDocumentFragmentWithoutChildren(e)){e=this.adoptElement(e);var t=e;if(e.nodeType===u.documentFragmentNode){var n=e.childNodes.length-1;t=e.childNodes[n]}this.range.insertNode(e),this.range.setStartAfter(t),this.range.setEndAfter(t)}},insertAfter:function(e){c.isString(e)&&(e=s.createFragmentFromString(e)),a.isDocumentFragmentWithoutChildren(e)||(e=this.adoptElement(e),this.range.insertNode(e))},setSelection:function(){this.setVisibleSelection()},setVisibleSelection:function(){this.win.document.activeElement!==this.host&&r(this.host).focus(),o.getSelection(this.win).setSingleRange(this.range)},before:function(){var e=null,t=this.range.cloneRange();return t.setStartBefore(this.host),e=s.cloneRangeContents(t)},beforeHtml:function(){return s.getInnerHtmlOfFragment(this.before())},after:function(){var e=null,t=this.range.cloneRange();return t.setEndAfter(this.host),e=s.cloneRangeContents(t)},afterHtml:function(){return s.getInnerHtmlOfFragment(this.after())},getCoordinates:function(e){e=e||"absolute";var t=this.range.nativeRange.getBoundingClientRect();if("fixed"===e)return t;var n=this.win,i=void 0!==n.pageXOffset?n.pageXOffset:(n.document.documentElement||n.document.body.parentNode||n.document.body).scrollLeft,o=void 0!==n.pageYOffset?n.pageYOffset:(n.document.documentElement||n.document.body.parentNode||n.document.body).scrollTop;return{top:t.top+o,bottom:t.bottom+o,left:t.left+i,right:t.right+i,height:t.height,width:t.width}},moveBefore:function(t){return this.updateHost(t),this.range.setStartBefore(t),this.range.setEndBefore(t),this.isSelection?new e(this.host,this.range):void 0},moveAfter:function(t){return this.updateHost(t),this.range.setStartAfter(t),this.range.setEndAfter(t),this.isSelection?new e(this.host,this.range):void 0},moveAtBeginning:function(t){return t||(t=this.host),this.updateHost(t),this.range.selectNodeContents(t),this.range.collapse(!0),this.isSelection?new e(this.host,this.range):void 0},moveAtEnd:function(t){return t||(t=this.host),this.updateHost(t),this.range.selectNodeContents(t),this.range.collapse(!1),this.isSelection?new e(this.host,this.range):void 0},moveAtTextEnd:function(e){return this.moveAtEnd(a.latestChild(e))},setHost:function(e){e.jquery&&(e=e[0]),this.host=e,this.win=void 0===e||null===e?window:e.ownerDocument.defaultView},updateHost:function(e){var t=a.getHost(e);t||d("Can not set cursor outside of an editable block"),this.setHost(t)},retainVisibleSelection:function(e){this.save(),e(),this.restore(),this.setVisibleSelection()},save:function(){this.savedRangeInfo=l.save(this.range),this.savedRangeInfo.host=this.host},restore:function(){this.savedRangeInfo?(this.host=this.savedRangeInfo.host,this.range=l.restore(this.host,this.savedRangeInfo),this.savedRangeInfo=void 0):d("Could not restore selection")},equals:function(e){return e&&e.host&&e.host.isEqualNode(this.host)&&e.range&&e.range.equals(this.range)?!0:!1},createElement:function(e){return this.win.document.createElement(e)},adoptElement:function(e){return s.adoptElement(e,this.win.document)},triggerChange:function(){r(this.host).trigger("formatEditable")}}}(),e}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./content":5,"./node-type":16,"./parser":17,"./range-save-restore":19,"./util/error":23,"./util/string":25}],10:[function(e,t,n){(function(n){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,o=e("./feature-detection"),r=e("./clipboard"),s=e("./eventable"),a=e("./selection-watcher"),c=e("./config"),u=e("./keyboard"),d=function(e){var t=e.win;s(this,e),this.supportsInputEvent=!1,this.$document=i(t.document),this.config=e.config,this.editable=e,this.editableSelector=e.editableSelector,this.selectionWatcher=new a(this,t),this.keyboard=new u(this.selectionWatcher),this.setup()};t.exports=d;var l=!1;d.prototype.setup=function(){this.setupElementEvents(),this.setupKeyboardEvents(),o.selectionchange?this.setupSelectionChangeEvents():this.setupSelectionChangeFallback()},d.prototype.unload=function(){this.off(),this.$document.off(".editable")},d.prototype.setupElementEvents=function(){var e=this;this.$document.on("focus.editable",e.editableSelector,function(t){this.getAttribute(c.pastingAttribute)||e.notify("focus",this)}).on("blur.editable",e.editableSelector,function(t){this.getAttribute(c.pastingAttribute)||e.notify("blur",this)}).on("copy.editable",e.editableSelector,function(t){var n=e.selectionWatcher.getFreshSelection();n.isSelection&&e.notify("clipboard",this,"copy",n)}).on("cut.editable",e.editableSelector,function(t){var n=e.selectionWatcher.getFreshSelection();n.isSelection&&(e.notify("clipboard",this,"cut",n),e.triggerChangeEvent(this))}).on("paste.editable",e.editableSelector,function(t){var n=this,i=function(t,i){t.length?(e.notify("paste",n,t,i),e.notify("change",n)):i.setVisibleSelection()},o=e.selectionWatcher.getFreshSelection();r.paste(this,o,i)}).on("input.editable",e.editableSelector,function(t){l?e.notify("change",this):l=!0}).on("formatEditable.editable",e.editableSelector,function(t){e.notify("change",this)})},d.prototype.triggerChangeEvent=function(e){l||this.notify("change",e)},d.prototype.dispatchSwitchEvent=function(e,t,n){var i;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&(i=this.selectionWatcher.getSelection(),i&&!i.isSelection)){var o=this;setTimeout(function(){var r=o.selectionWatcher.forceCursor();r.equals(i)&&(e.preventDefault(),e.stopPropagation(),o.notify("switch",t,n,r))},1)}},d.prototype.setupKeyboardEvents=function(){var e=this;this.$document.on("keydown.editable",this.editableSelector,function(t){var n=!l;e.keyboard.dispatchKeyEvent(t,this,n)}),this.keyboard.on("left",function(t){e.dispatchSwitchEvent(t,this,"before")}).on("up",function(t){e.dispatchSwitchEvent(t,this,"before")}).on("right",function(t){e.dispatchSwitchEvent(t,this,"after")}).on("down",function(t){e.dispatchSwitchEvent(t,this,"after")}).on("tab",function(e){}).on("shiftTab",function(e){}).on("esc",function(e){}).on("backspace",function(t){var n=e.selectionWatcher.getFreshRange();if(n.isCursor){var i=n.getCursor();i.isAtBeginning()?(t.preventDefault(),t.stopPropagation(),e.notify("merge",this,"before",i)):e.triggerChangeEvent(this)}else e.triggerChangeEvent(this)}).on("delete",function(t){var n=e.selectionWatcher.getFreshRange();if(n.isCursor){var i=n.getCursor();i.isAtTextEnd()?(t.preventDefault(),t.stopPropagation(),e.notify("merge",this,"after",i)):e.triggerChangeEvent(this)}else e.triggerChangeEvent(this)}).on("enter",function(t){t.preventDefault(),t.stopPropagation();var n=e.selectionWatcher.getFreshRange(),i=n.forceCursor();i.isAtTextEnd()?e.notify("insert",this,"after",i):i.isAtBeginning()?e.notify("insert",this,"before",i):e.notify("split",this,i.before(),i.after(),i)}).on("shiftEnter",function(t){t.preventDefault(),t.stopPropagation();var n=e.selectionWatcher.forceCursor();e.notify("newline",this,n)}).on("character",function(t){e.notify("change",this)})},d.prototype.setupSelectionChangeEvents=function(){var e=!1,t=!1,n=this.$document,o=this.selectionWatcher,r=this;n.on("selectionchange.editable",function(n){t?e=!0:o.selectionChanged()}),n.on("mousedown.editable",this.editableSelector,function(s){r.config.mouseMoveSelectionChanges===!1&&(t=!0,setTimeout(i.proxy(o,"selectionChanged"),0)),n.on("mouseup.editableSelection",function(i){n.off(".editableSelection"),t=!1,e&&(e=!1,o.selectionChanged())})})},d.prototype.setupSelectionChangeFallback=function(){var e=this.$document,t=this.selectionWatcher;e.on("mouseup.editableSelection",function(e){setTimeout(i.proxy(t,"selectionChanged"),0)}),e.on("keyup.editable",this.editableSelector,function(e){t.selectionChanged()})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./clipboard":3,"./config":4,"./eventable":11,"./feature-detection":12,"./keyboard":14,"./selection-watcher":20}],11:[function(e,t,n){var i=function(e){var t={},n=function(e,n){void 0===t[e]&&(t[e]=[]),t[e].push(n)},i=function(e,n){var i=t[e];if(void 0!==i)for(var o=0,r=i.length;r>o;o++)if(i[o]===n){i.splice(o,1);break}};return{on:function(e,t){if(2===arguments.length)n(e,t);else if(1===arguments.length){var i=e;for(var o in i)n(o,i[o])}return this},off:function(e,n){2===arguments.length?i(e,n):1===arguments.length?t[e]=[]:t={}},notify:function(n,i){var o=Array.prototype.slice.call(arguments);e?(i=n,n=e,o=o.splice(1)):o=o.splice(2);var r=t[i];if(void 0!==r)for(var s=r.length-1;s>=0&&r[s].apply(n,o)!==!1;s--);}}};t.exports=function(e,t){var n=i(t);for(var o in n)e[o]=n[o]}},{}],12:[function(e,t,n){var i=e("bowser").browser;t.exports=function(){var e="undefined"!=typeof document.documentElement.contentEditable,t=function(){return!(i.gecko||i.opera)}(),n=function(){return!!i.webkit}();return{contenteditable:e,selectionchange:t,contenteditableSpanBug:n}}()},{bowser:1}],13:[function(e,t,n){(function(n){var i="undefined"!=typeof window?window.rangy:"undefined"!=typeof n?n.rangy:null,o=e("./node-iterator"),r=e("./node-type");t.exports=function(){return{extractText:function(e){var t="";return this.getText(e,function(e){t+=e}),t},getText:function(e,t){for(var n,i=new o(e);n=i.getNext();)n.nodeType===r.textNode&&""!==n.data?t(n.data):n.nodeType===r.elementNode&&"BR"===n.nodeName&&t(" ")},highlight:function(e,t,n){var i=this.find(e,t);this.highlightMatches(e,i,n)},find:function(e,t){for(var n,i=this.extractText(e),o=[],r=0;n=t.exec(i);)o.push(this.prepareMatch(n,r)),r+=1;return o},highlightMatches:function(e,t,n){if(t&&0!==t.length)for(var i,s,a,c,u,d,l,f=0,h=t[f],p=0,g=new o(e),v=[];i=g.getNext();)if(i.nodeType===r.textNode&&""!==i.data){s=i;var m=s.data,y=p+m.length;if(h.startIndex<y&&p<h.endIndex){u=d=!1,p<=h.startIndex&&(u=!0,l=h.startIndex),y>=h.endIndex&&(d=!0),c=u?h.startIndex-p:0,a=d?h.endIndex-p-c:m.length-c;var b={element:s,text:m.substring(c,c+a),offset:c,length:a,isLastPortion:d,wordId:l};if(v.push(b),d){var w=this.wrapWord(v,n);g.replaceCurrent(w),y=p+b.length+b.offset,v=[],f+=1,f<t.length&&(h=t[f])}}p=y}else if(i.nodeType===r.elementNode&&"BR"===i.nodeName){p+=1;continue}},getRange:function(e){var t=i.createRange();return t.selectNodeContents(e),t},wrapWord:function(e,t){for(var n,i=0;i<e.length;i++){var o=e[i];n=this.wrapPortion(o,t)}return n},wrapPortion:function(e,t){var n=i.createRange();n.setStart(e.element,e.offset),n.setEnd(e.element,e.offset+e.length);var o=t.cloneNode(!0);if(o.setAttribute("data-word-id",e.wordId),n.surroundContents(o),o.nextSibling){var s=o.nextSibling;s.nodeType===r.textNode&&""===s.data&&s.parentNode.removeChild(s)}return o},prepareMatch:function(e,t){return e[2]?this.prepareMatchForSecondSubgroup(e,t):{startIndex:e.index,endIndex:e.index+e[0].length,matchIndex:t,search:e[0]}},prepareMatchForSecondSubgroup:function(e,t){var n=e.index;return n+=e[1].length,{startIndex:n,endIndex:n+e[2].length,matchIndex:t,search:e[0]}}}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./node-iterator":15,"./node-type":16}],14:[function(e,t,n){var i=e("./feature-detection"),o=e("./node-type"),r=e("./eventable"),s=function(e){r(this),this.selectionWatcher=e};t.exports=s,s.prototype.dispatchKeyEvent=function(e,t,n){switch(e.keyCode){case this.key.left:this.notify(t,"left",e);break;case this.key.right:this.notify(t,"right",e);break;case this.key.up:this.notify(t,"up",e);break;case this.key.down:this.notify(t,"down",e);break;case this.key.tab:e.shiftKey?this.notify(t,"shiftTab",e):this.notify(t,"tab",e);break;case this.key.esc:this.notify(t,"esc",e);break;case this.key.backspace:this.preventContenteditableBug(t,e),this.notify(t,"backspace",e);break;case this.key["delete"]:this.preventContenteditableBug(t,e),this.notify(t,"delete",e);
break;case this.key.enter:e.shiftKey?this.notify(t,"shiftEnter",e):this.notify(t,"enter",e);break;case this.key.ctrl:case this.key.shift:case this.key.alt:break;case 224:case 17:case 91:case 93:break;default:this.preventContenteditableBug(t,e),n&&this.notify(t,"character",e)}},s.prototype.preventContenteditableBug=function(e,t){if(i.contenteditableSpanBug){if(t.ctrlKey||t.metaKey)return;var n=this.selectionWatcher.getFreshRange();if(n.isSelection){var r,s=n.range;0===s.startOffset&&(s.startContainer.nodeType===o.textNode?r=s.startContainer.parentNode:s.startContainer.nodeType===o.elementNode&&(r=s.startContainer)),r&&r!==e&&s.containsNode(r,!0)&&r.remove()}}},s.prototype.key={left:37,up:38,right:39,down:40,tab:9,esc:27,backspace:8,"delete":46,enter:13,shift:16,ctrl:17,alt:18},s.key=s.prototype.key},{"./eventable":11,"./feature-detection":12,"./node-type":16}],15:[function(e,t,n){var i,o=e("./node-type");t.exports=i=function(){var e=function(e){this.root=e,this.current=this.next=this.root};return e.prototype.getNextTextNode=function(){for(var e;e=this.getNext();)if(e.nodeType===o.textNode&&""!==e.data)return e},e.prototype.getNext=function(){var e,t;if(t=this.current=this.next,e=this.next=void 0,this.current)if(e=t.firstChild,e&&"remove"!==t.getAttribute("data-editable"))this.next=e;else for(;t!==this.root&&!(this.next=t.nextSibling);)t=t.parentNode;return this.current},e.prototype.replaceCurrent=function(e){this.current=e,this.next=void 0;for(var t=this.current;t!==this.root&&!(this.next=t.nextSibling);)t=t.parentNode},e}()},{"./node-type":16}],16:[function(e,t,n){t.exports={elementNode:1,attributeNode:2,textNode:3,cdataSectionNode:4,entityReferenceNode:5,entityNode:6,processingInstructionNode:7,commentNode:8,documentNode:9,documentTypeNode:10,documentFragmentNode:11,notationNode:12}},{}],17:[function(e,t,n){(function(n){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,o=e("./util/string"),r=e("./node-type"),s=e("./config");t.exports=function(){return{getHost:function(e){var t="."+s.editableClass,n=i(e).closest(t);return n.length?n[0]:void 0},getNodeIndex:function(e){for(var t=0;null!==(e=e.previousSibling);)t+=1;return t},isVoid:function(e){var t,n,i,o=e.childNodes;for(n=0,i=o.length;i>n;n++){if(t=o[n],t.nodeType===r.textNode&&!this.isVoidTextNode(t))return!1;if(t.nodeType===r.elementNode)return!1}return!0},isVoidTextNode:function(e){return e.nodeType===r.textNode&&!e.nodeValue},isWhitespaceOnly:function(e){return e.nodeType===r.textNode&&0===this.lastOffsetWithContent(e)},isLinebreak:function(e){return e.nodeType===r.elementNode&&"BR"===e.tagName},lastOffsetWithContent:function(e){if(e.nodeType===r.textNode)return o.trimRight(e.nodeValue).length;var t,n=e.childNodes;for(t=n.length-1;t>=0;t--)if(e=n[t],!this.isWhitespaceOnly(e)&&!this.isLinebreak(e))return t+1;return 0},isBeginningOfHost:function(e,t,n){if(t===e)return this.isStartOffset(t,n);if(this.isStartOffset(t,n)){var i=t.parentNode,o=this.getNodeIndex(t);return this.isBeginningOfHost(e,i,o)}return!1},isEndOfHost:function(e,t,n){if(t===e)return this.isEndOffset(t,n);if(this.isEndOffset(t,n)){var i=t.parentNode,o=this.getNodeIndex(t)+1;return this.isEndOfHost(e,i,o)}return!1},isStartOffset:function(e,t){return e.nodeType===r.textNode?0===t:0===e.childNodes.length?!0:e.childNodes[t]===e.firstChild},isEndOffset:function(e,t){return e.nodeType===r.textNode?t===e.length:0===e.childNodes.length?!0:t>0?e.childNodes[t-1]===e.lastChild:!1},isTextEndOfHost:function(e,t,n){if(t===e)return this.isTextEndOffset(t,n);if(this.isTextEndOffset(t,n)){var i=t.parentNode,o=this.getNodeIndex(t)+1;return this.isTextEndOfHost(e,i,o)}return!1},isTextEndOffset:function(e,t){if(e.nodeType===r.textNode){var n=o.trimRight(e.nodeValue);return t>=n.length}if(0===e.childNodes.length)return!0;var i=this.lastOffsetWithContent(e);return t>=i},isSameNode:function(e,t){var n,i,o;if(e.nodeType!==t.nodeType)return!1;if(e.nodeName!==t.nodeName)return!1;for(n=0,i=e.attributes.length;i>n;n++)if(o=e.attributes[n],t.getAttribute(o.name)!==o.value)return!1;return!0},latestChild:function(e){return e.lastChild?this.latestChild(e.lastChild):e},isDocumentFragmentWithoutChildren:function(e){return e&&e.nodeType===r.documentFragmentNode&&0===e.childNodes.length?!0:!1},isInlineElement:function(e,t){var n=t.currentStyle||e.getComputedStyle(t,""),i=n.display;switch(i){case"inline":case"inline-block":return!0;default:return!1}}}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":4,"./node-type":16,"./util/string":25}],18:[function(e,t,n){var i,o=e("./cursor"),r=e("./selection");t.exports=i=function(e,t){this.host=e&&e.jquery?e[0]:e,this.range=t,this.isAnythingSelected=void 0!==t,this.isCursor=this.isAnythingSelected&&t.collapsed,this.isSelection=this.isAnythingSelected&&!this.isCursor},i.prototype.getCursor=function(){return this.isCursor?new o(this.host,this.range):void 0},i.prototype.getSelection=function(){return this.isSelection?new r(this.host,this.range):void 0},i.prototype.forceCursor=function(){if(this.isSelection){var e=this.getSelection();return e.deleteContent()}return this.getCursor()},i.prototype.isDifferentFrom=function(e){e=e||new i;var t=this.range,n=e.range;return t&&n?!t.equals(n):t||n?!0:!1}},{"./cursor":9,"./selection":21}],19:[function(e,t,n){(function(n){var i="undefined"!=typeof window?window.rangy:"undefined"!=typeof n?n.rangy:null,o=e("./util/error"),r=e("./node-type");t.exports=function(){var e=0,t="\ufeff",n=function(e,t){return e.querySelector("#"+t)};return{insertRangeBoundaryMarker:function(n,i){var r,s="editable-range-boundary-"+(e+=1),a=n.commonAncestorContainer;(null===a.ownerDocument||void 0===a.ownerDocument)&&o("Cannot save range: range is emtpy");var c=a.ownerDocument.defaultView.document,u=n.cloneRange();return u.collapse(i),r=c.createElement("span"),r.id=s,r.setAttribute("data-editable","remove"),r.style.lineHeight="0",r.style.display="none",r.appendChild(c.createTextNode(t)),u.insertNode(r),r},setRangeBoundary:function(e,t,i,o){var r=n(e,i);r?(t[o?"setStartBefore":"setEndBefore"](r),r.parentNode.removeChild(r)):console.log("Marker element has been removed. Cannot restore selection.")},save:function(e){var t,n,i;return e.collapsed?(i=this.insertRangeBoundaryMarker(e,!1),t={markerId:i.id,collapsed:!0}):(i=this.insertRangeBoundaryMarker(e,!1),n=this.insertRangeBoundaryMarker(e,!0),t={startMarkerId:n.id,endMarkerId:i.id,collapsed:!1}),e.collapsed?e.collapseBefore(i):(e.setEndBefore(i),e.setStartAfter(n)),t},restore:function(e,t){if(!t.restored){var o=i.createRange();if(t.collapsed){var s=n(e,t.markerId);if(s){s.style.display="inline";var a=s.previousSibling;a&&a.nodeType===r.textNode?(s.parentNode.removeChild(s),o.collapseToPoint(a,a.length)):(o.collapseBefore(s),s.parentNode.removeChild(s))}else console.log("Marker element has been removed. Cannot restore selection.")}else this.setRangeBoundary(e,o,t.startMarkerId,!0),this.setRangeBoundary(e,o,t.endMarkerId,!1);return o.normalizeBoundaries(),o}}}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./node-type":16,"./util/error":23}],20:[function(e,t,n){(function(n){var i,o="undefined"!=typeof window?window.rangy:"undefined"!=typeof n?n.rangy:null,r=e("./parser"),s=e("./range-container"),a=e("./cursor"),c=e("./selection");t.exports=i=function(e,t){this.dispatcher=e,this.win=t||window,this.rangySelection=void 0,this.currentSelection=void 0,this.currentRange=void 0},i.prototype.getRangeContainer=function(){if(this.rangySelection=o.getSelection(this.win),this.rangySelection.rangeCount){var e=this.rangySelection.getRangeAt(0),t=r.getHost(e.commonAncestorContainer);if(t)return new s(t,e)}return new s},i.prototype.getFreshRange=function(){return this.getRangeContainer()},i.prototype.getFreshSelection=function(){var e=this.getRangeContainer();return e.isCursor?e.getCursor(this.win):e.getSelection(this.win)},i.prototype.getSelection=function(){return this.currentSelection},i.prototype.forceCursor=function(){var e=this.getRangeContainer();return e.forceCursor()},i.prototype.selectionChanged=function(){var e=this.getRangeContainer();if(e.isDifferentFrom(this.currentRange)){var t=this.currentSelection;this.currentRange=e,t&&(t.isCursor&&!this.currentRange.isCursor?this.dispatcher.notify("cursor",t.host):t.isSelection&&!this.currentRange.isSelection&&this.dispatcher.notify("selection",t.host)),this.currentRange.isCursor?(this.currentSelection=new a(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("cursor",this.currentSelection.host,this.currentSelection)):this.currentRange.isSelection?(this.currentSelection=new c(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("selection",this.currentSelection.host,this.currentSelection)):this.currentSelection=void 0}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cursor":9,"./parser":17,"./range-container":18,"./selection":21}],21:[function(e,t,n){(function(n){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,o=e("./cursor"),r=e("./content"),s=e("./parser"),a=e("./config");t.exports=function(){var e=function(e,t){this.setHost(e),this.range=t,this.isSelection=!0},t=function(){};return t.prototype=o.prototype,e.prototype=i.extend(new t,{text:function(){return this.range.toString()},html:function(){return this.range.toHtml()},isAllSelected:function(){return s.isBeginningOfHost(this.host,this.range.startContainer,this.range.startOffset)&&s.isTextEndOfHost(this.host,this.range.endContainer,this.range.endOffset)},getRects:function(){var e=this.range.nativeRange.getClientRects();return e},link:function(e,t){var n=i(this.createElement("a"));e&&n.attr("href",e);for(var o in t)n.attr(o,t[o]);this.forceWrap(n[0])},unlink:function(){this.removeFormatting("a")},toggleLink:function(e,t){var n=this.getTagsByName("a");if(n.length>=1){var i=n[0];this.isExactSelection(i,"visible")?this.unlink():this.expandTo(i)}else this.link(e,t)},toggle:function(e){e=this.adoptElement(e),this.range=r.toggleTag(this.host,this.range,e),this.setSelection()},makeBold:function(){var e=this.createElement(a.boldTag);this.forceWrap(e)},toggleBold:function(){var e=this.createElement(a.boldTag);this.toggle(e)},giveEmphasis:function(){var e=this.createElement(a.italicTag);this.forceWrap(e)},toggleEmphasis:function(){var e=this.createElement(a.italicTag);this.toggle(e)},surround:function(e,t){this.range=r.surround(this.host,this.range,e,t),this.setSelection()},removeSurround:function(e,t){this.range=r.deleteCharacter(this.host,this.range,e),this.range=r.deleteCharacter(this.host,this.range,t),this.setSelection()},toggleSurround:function(e,t){this.containsString(e)&&this.containsString(t)?this.removeSurround(e,t):this.surround(e,t)},removeFormatting:function(e){this.range=r.removeFormatting(this.host,this.range,e),this.setSelection()},deleteContent:function(){return this.range.deleteContents(),new o(this.host,this.range)},expandTo:function(e){this.range=r.expandTo(this.host,this.range,e),this.setSelection()},collapseAtBeginning:function(e){return this.range.collapse(!0),this.setSelection(),new o(this.host,this.range)},collapseAtEnd:function(e){return this.range.collapse(!1),this.setSelection(),new o(this.host,this.range)},forceWrap:function(e){e=this.adoptElement(e),this.range=r.forceWrap(this.host,this.range,e),this.setSelection()},getTags:function(e){return r.getTags(this.host,this.range,e)},getTagsByName:function(e){return r.getTagsByName(this.host,this.range,e)},isExactSelection:function(e,t){return r.isExactSelection(this.range,e,t)},containsString:function(e){return r.containsString(this.range,e)},deleteCharacter:function(e){this.range=r.deleteCharacter(this.host,this.range,e),this.setSelection()}}),e}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":4,"./content":5,"./cursor":9,"./parser":17}],22:[function(e,t,n){(function(n){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,o=e("./content"),r=e("./highlight-text"),s=e("./node-type");t.exports=function(){var e="\\u0041-\\u005A\\u0061-\\u007A\\u0030-\\u0039\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u017F\\u0180-\\u024F",t=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},n=function(e,t){var n={checkOnFocus:!1,checkOnChange:!0,throttle:1e3,removeOnCorrection:!0,markerNode:i('<span class="spellcheck"></span>'),spellcheckService:void 0};this.editable=e,this.win=e.win,this.config=i.extend(n,t),this.prepareMarkerNode(),this.setup()};return n.prototype.setup=function(e){this.config.checkOnFocus&&(this.editable.on("focus",i.proxy(this,"onFocus")),this.editable.on("blur",i.proxy(this,"onBlur"))),(this.config.checkOnChange||this.config.removeOnCorrection)&&this.editable.on("change",i.proxy(this,"onChange"))},n.prototype.onFocus=function(e){this.focusedEditable!==e&&(this.focusedEditable=e,this.editableHasChanged(e))},n.prototype.onBlur=function(e){this.focusedEditable===e&&(this.focusedEditable=void 0)},n.prototype.onChange=function(e){this.config.checkOnChange&&this.editableHasChanged(e,this.config.throttle),this.config.removeOnCorrection&&this.removeHighlightsAtCursor(e)},n.prototype.prepareMarkerNode=function(){var e=this.config.markerNode;e.jquery&&(e=e[0]),e=o.adoptElement(e,this.win.document),this.config.markerNode=e,e.setAttribute("data-editable","ui-unwrap"),e.setAttribute("data-spellcheck","spellcheck")},n.prototype.createMarkerNode=function(){return this.config.markerNode.cloneNode()},n.prototype.removeHighlights=function(e){i(e).find("[data-spellcheck=spellcheck]").each(function(e,t){o.unwrap(t)})},n.prototype.removeHighlightsAtCursor=function(e){var t,n=this.editable.getSelection(e);if(n&&n.isCursor){var r=n.range.startContainer;r.nodeType===s.textNode&&(r=r.parentNode);do{if(r===e)return;if(r.hasAttribute("data-word-id")){t=r.getAttribute("data-word-id");break}}while(r=r.parentNode);t&&n.retainVisibleSelection(function(){i(e).find("[data-word-id="+t+"]").each(function(e,t){o.unwrap(t)})})}},n.prototype.createRegex=function(n){var o=i.map(n,function(e){return t(e)}),r="";return r+="([^"+e+"]|^)",r+="("+o.join("|")+")",r+="(?=[^"+e+"]|$)",new RegExp(r,"g")},n.prototype.highlight=function(e,t){if(this.removeHighlights(e),t&&t.length>0){var n=this.createRegex(t),i=this.createMarkerNode();r.highlight(e,n,i)}},n.prototype.editableHasChanged=function(e,t){this.timeoutId&&this.currentEditableHost===e&&clearTimeout(this.timeoutId);var n=this;this.timeoutId=setTimeout(function(){n.checkSpelling(e),n.currentEditableHost=void 0,n.timeoutId=void 0},t||0),this.currentEditableHost=e},n.prototype.checkSpelling=function(e){var t=this,n=r.extractText(e);n=o.normalizeWhitespace(n),this.config.spellcheckService(n,function(n){var i=t.editable.getSelection(e);i?i.retainVisibleSelection(function(){t.highlight(e,n)}):t.highlight(e,n)})},n}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./content":5,"./highlight-text":13,"./node-type":16}],23:[function(e,t,n){var i=e("../config");t.exports=function(){if(i.logErrors!==!1){var e;return e=Array.prototype.slice.call(arguments),1===e.length&&(e=e[0]),window.console&&"function"==typeof window.console.error?console.error(e):window.console?console.log(e):void 0}}},{"../config":4}],24:[function(e,t,n){var i=e("../config");t.exports=function(){if(i.log!==!1){var e,t;return e=Array.prototype.slice.call(arguments),e.length&&"trace"===e[e.length-1]&&(e.pop(),((t=window.console)?t.trace:void 0)&&console.trace()),1===e.length&&(e=e[0]),window.console?console.log(e):void 0}}},{"../config":4}],25:[function(e,t,n){t.exports=function(){var e=Object.prototype.toString,t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return{trimRight:function(e){return e.replace(/\s+$/,"")},trimLeft:function(e){return e.replace(/^\s+/,"")},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},isString:function(t){return"[object String]"===e.call(t)},regexp:function(e,t){t||(t="g");var n=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return new RegExp(n,t)},escapeHtml:function(e,n){return e.replace(n?/[&<>'"]/g:/[&<>]/g,function(e){return t[e]})},browserEscapeHtml:function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}}}()},{}]},{},[6]);
